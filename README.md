README â€“ ×¤×¨×•×™×§×˜ DevOps Home Task

(×‘×¢×‘×¨×™×ª + ××•×ª×× ×œ×¨××™×•×Ÿ ×¢×‘×•×“×”)

ğŸ“Œ ×ª×™××•×¨ ×›×œ×œ×™

×–×”×• ×¤×¨×•×™×§×˜ End-to-End ×”××“×’×™× ×¢×‘×•×“×” ××œ××” ×‘Ö¾DevOps:
× ×™×”×•×œ ×ª×©×ª×™×•×ª ×‘Ö¾AWS ×‘×××¦×¢×•×ª Terraform, ×‘× ×™×™×ª ××¤×œ×™×§×¦×™×™×ª Flask ×‘×§×•× ×˜×™×™× ×¨ Docker, ×”×§××ª Jenkins ×›×©×¨×ª CI/CD, ×•×”×’×“×¨×” ×©×œ Pipeline ××œ× ×©××‘×¦×¢:

Lint

Unit Tests

Build ×©×œ Docker Image

Push ×œÖ¾Docker Hub

Deploy ××•×˜×•××˜×™ ×œÖ¾EC2 ×”×××¨×— ××ª ×”××¤×œ×™×§×¦×™×”

Health-Check (×‘×—×œ×§ ××”×©×œ×‘×™×)

ğŸ§± ×˜×›× ×•×œ×•×’×™×•×ª ×¢×™×§×¨×™×•×ª

Terraform â€“ ×ª×©×ª×™×•×ª ×›Ö¾×§×•×“, ×¤×¨×™×¡×” ×•× ×™×”×•×œ ××©××‘×™× ×‘Ö¾AWS

AWS â€“ EC2, VPC, Subnets, Security Groups

Docker â€“ ×‘× ×™×™×ª image ×œ×”×¨×¦×ª ×”××¤×œ×™×§×¦×™×”

Jenkins â€“ CI/CD ××œ×

GitHub â€“ ××—×¡×•×Ÿ ×§×•×“ ×•×˜×¨×™×’×¨×™×

Python + Flask â€“ ××¤×œ×™×§×¦×™×™×ª Web ×¤×©×•×˜×”

pytest / flake8 â€“ ×‘×“×™×§×•×ª ×•Ö¾Lint

ğŸ— ××¨×›×™×˜×§×˜×•×¨×” (Medium Level)
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚         GitHub Repo        â”‚
                         â”‚  my-devops-home-task       â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚ Webhook / Poll SCM
                                       â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚        Jenkins EC2         â”‚
                         â”‚  (t3.small, Ubuntu)        â”‚
                         â”‚--------------------------- â”‚
                         â”‚ â€¢ ×©×•××‘ ×§×•×“ ×-GitHub        â”‚
                         â”‚ â€¢ ××¨×™×¥ Lint & Tests        â”‚
                         â”‚ â€¢ ×‘×•× ×” Docker Image        â”‚
                         â”‚ â€¢ ××‘×¦×¢ Login ×œ-Docker Hub  â”‚
                         â”‚ â€¢ ×“×•×—×£ Image               â”‚
                         â”‚ â€¢ SSH ×œ-App EC2            â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚ SSH + Docker
                                       â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚          App EC2           â”‚
                         â”‚  (t3.small, Ubuntu)        â”‚
                         â”‚--------------------------- â”‚
                         â”‚ â€¢ ××•×©×š Image ×—×“×©          â”‚
                         â”‚ â€¢ ×¢×•×¦×¨ ×§×•× ×˜×™×™× ×¨ ×§×•×“×      â”‚
                         â”‚ â€¢ ××¨×™×¥ ×§×•× ×˜×™×™× ×¨ ×‘-Port 80 â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚ HTTP 80
                                       â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚        ××©×ª××© ×§×¦×”          â”‚
                         â”‚  ×’×™×©×” ×œ××¤×œ×™×§×¦×™×”           â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


VPC:
â”‚
â”œâ”€â”€ Public Subnet (×œ×©× ×™ ×”×©×¨×ª×™×)
â”‚       â”œâ”€â”€ EC2 Jenkins
â”‚       â””â”€â”€ EC2 App Server
â”‚
â””â”€â”€ Security Groups (Medium Detail):
        â€¢ sg_jenkins_ssh: ×××¤×©×¨ 22 ××”Ö¾IP ×©×œ×š  
        â€¢ sg_jenkins_ui: ×××¤×©×¨ 8080 ××”Ö¾IP ×©×œ×š  
        â€¢ sg_app_http: ×××¤×©×¨ 80 ×œ×›×•×œ×  
        â€¢ sg_app_from_jenkins: Jenkins â†’ App (SSH + Docker ops)

ğŸ§© ×ª×™×§×™×•×ª ×‘×§×•×“
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py            # ×§×•×‘×¥ ×”××¤×œ×™×§×¦×™×”
â”‚   â”œâ”€â”€ app.py             # ×œ×•×’×™×§×” × ×•×¡×¤×ª (××•×¤×¦×™×•× ×œ×™)
â”‚   â”œâ”€â”€ requirements.txt   # ×¡×¤×¨×™×•×ª ×¤×™×™×ª×•×Ÿ
â”‚   â”œâ”€â”€ Dockerfile         # ×‘× ×™×™×ª Image ×“×•Ö¾×©×œ×‘×™×ª
â”‚   â”œâ”€â”€ test_app.py        # ×‘×“×™×§×•×ª
â”‚   â””â”€â”€ user_data_app.sh   # bootstrap (×œ× ×—×•×‘×” ×‘×¤×¨×•×™×§×˜)
â”‚
â”œâ”€â”€ infra/
â”‚   â”œâ”€â”€ main.tf            # ×™×¦×™×¨×ª EC2 ×œ×ª×¤×§×™×“ Jenkins + App
â”‚   â”œâ”€â”€ variables.tf
â”‚   â”œâ”€â”€ outputs.tf
â”‚   â”œâ”€â”€ terraform.tfvars   # ×”×¢×¨×›×™× ×©×œ×š
â”‚   â””â”€â”€ user_data_jenkins.sh
â”‚
â”œâ”€â”€ jenkins/
â”‚   â””â”€â”€ install_jenkins.sh # ×”×ª×§× ×ª Jenkins ×‘-EC2
â”‚
â””â”€â”€ Jenkinsfile            # CI/CD Pipeline ××œ×

ğŸš€ ××” ×¢×•×©×” ×”Ö¾Pipeline?
1ï¸âƒ£ Lint
flake8 .

2ï¸âƒ£ Unit Tests
pytest

3ï¸âƒ£ Build Image
docker build -t ozposner/devops-home-task:<BUILD_NUMBER> .

4ï¸âƒ£ Login ×œ×“×•×§×¨Ö¾×”××‘
docker login -u $DOCKER_USER -p $DOCKER_PASS

5ï¸âƒ£ Push
docker push ozposner/devops-home-task:<BUILD_NUMBER>

6ï¸âƒ£ Deploy ×œÖ¾App EC2

×‘×××¦×¢×•×ª SSH:

docker pull image
docker rm -f app || true
docker run -d -p 80:5000 image

ğŸ” ××‘×˜×—×”

×”×’×‘×œ×ª ×’×™×©×” ×œÖ¾Jenkins ×œÖ¾IP ×©×œ×š ×‘×œ×‘×“

×”×’×‘×œ×ª SSH ×œÖ¾IP ×©×œ×š ×‘×œ×‘×“

×©×™××•×© ×‘Ö¾Jenkins Credentials ×•×œ× ×œ×©××•×¨ ×¡×™×¡×××•×ª ×‘×§×•×“

Security Groups ×©×××¤×©×¨×™× ××™× ×™××•× ×’×™×©×” ×”×›×¨×—×™×ª (Least Privilege)

ğŸ“¦ ××™×š ×œ×”×¤×¢×™×œ ××ª ×”×ª×©×ª×™×•×ª?
cd infra
terraform init
terraform apply

ğŸ§ª ×‘×“×™×§×•×ª ××§×•××™×•×ª ×œ×¤× ×™ Jenkins
cd app
python3 main.py
pytest
docker build .

ğŸŒ Deployment ××•×¦×œ×—

×œ××—×¨ ×”×¨×¦×” ×©×œ Jenkins Pipeline
×”××ª×¨ ×™×”×™×” ×–××™×Ÿ ×‘×›×ª×•×‘×ª ×”Ö¾Public IP ×©×œ App EC2.
